#include <fstream>

#include "./compressor.hpp"
#include "catch.hpp"
#include "reader.hpp"

TEST_CASE("Code table is extracted properly", "[Reader]") {
  const std::string fixtureCodeString =
      {72, 69, 65, 68, 0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 3, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  6,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 6, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 3, 0, 5, 5,
       5,  4,  5,  6,  4, 0, 0, 5,  4,  4,  3,  5,  0, 5, 4, 5, 6, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 0,  0,  0,  0,  0,  0, 0, 0, 0, 0, 0, 0, 0, 0,
       0,  0,  0,  0,  0, 0, 0, 68, 65, 84, 65, 25, 0, 0, 0, 6, 0, 0, 0};

  Reader r;
  auto output = r.extractHead(fixtureCodeString);
  REQUIRE(output.size() == Huffman::NUM_ALL_CHARS);
}
